# General config
swagger: "2.0"
info:
  title: "Fetch projects"
  description: "Example APIs calling internal project APIs"
  version: "1.0.0"
host: "endpoints.wave16-joan.appspot.com"

# Mime types to/from API
consumes:
- "application/json"
produces:
- "application/json"

# App Engine endpoints
paths:
  "/users":
    get:
      description: "Returns list of all the users registered in the site"
      operationId: "AllStackUsers"
      produces:
      - "application/json"
      responses:
        200:          
          description: "Return a list of users"
          schema:
            $ref: "#/definitions/users"
      security:
      - api_key: []
  
  "/users/{userId}":
    get:
      description: "Returns the quieried user entity with all of his properties"
      operationId: "StackUser"
      produces:
      - "application/json"
      responses:
        200:
          description: "Returns an user"
          schema:
            $ref: '#/definitions/user'
        404:
          description: "User not found"
          schema:
            $ref: '#/definitions/Error'
        500:
          description: "Server unavailable"
          schema:
            $ref: '#/definitions/Error'
      parameters:
        - in: "path"
          description: "User to get"
          name: "userId"
          type: "string"
          required: true
      security:
      - api_key: []

# Object types
definitions:
  users:
    type: "array"
    items:
      type: "object"
      properties:
        users:
          type: "string"
  user:
    type: 'object'
    properties:
      username:
        type: 'string'
      last_connection:
        type: 'integer'
 
  Error:
    type: 'object'
    properties:
      message:
        type: 'string'

# Auth methods
securityDefinitions:
  api_key:
    type: "apiKey"
    name: "key"
    in: "query"

